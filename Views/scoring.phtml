<?php
require_once('../Views/template/header.phtml'); ?>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
        <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
            <?php $unscoredAudit = $view->unscoredAudit; ?>
            <div class="container">
             <?php $audits = $unscoredAudit['audit']; ?>
            <?php foreach ($audits as $audit)
                {?>
                <h2>Location: <?php echo $audit['location']; ?></h2>
                <h3>Date: <?php echo $audit['dateCreated']; ?> </h3>
                <?php } ?>
                <div class="card">
                    <div class="card-body">
                <p><strong>*</strong> = required</p>
                <?php
                $Categories = $unscoredAudit['scoringContent'];
                foreach ($Categories as $Category) { ?>
                    <h4 class="card-title">Category: <?php echo $Category['catDescription']; ?></h4>
                    <?php
                    $subCategories = $Category['subCategories'];
                    foreach ($subCategories as $subCategory) {
                        ?>
                        <h5 class="card-title">Sub-Category: <?php echo $subCategory['subCatDescription']; ?></h5>
                        <?php
                        $questions = $subCategory['questions'];
                        foreach ($questions as $question) {
                            ?>
                            <div class="card-body">
                                <p><strong>Question:</strong></p>
                                <p <?php if ($question['legalFlag'] !== null){ ?>class="text-danger"<?php } ?>><?php echo $question['questionContent']; ?></p>
                                <?php if ($question['legalFlag'] !== null) {
                                    ?>
                                    <p><?php echo $question['legalFlag']; ?></p>
                                <?php } ?>
                            </div>
                            <?php
                            $answers = $question['answer'];
                            ?>
                                <div class="card-body">
                                    <p><strong>Answer:</strong></p>
                                    <p><?php echo $answers['content']; ?></p>
                                </div>
                                <?php if ($answers['comment'] !== null) {
                                    ?>
                                    <div class="card-body">
                                        <p><strong>Answer Comment:</strong></p>
                                        <p><?php echo $answers['comment']; ?></p>
                                    </div>
                                <?php } ?>

                                <div class="card-body">
                                    <label for="inputScore"><strong>*Score 1-5</strong></label>
                                    <select id="inputScore" class="form-control" required>
                                        <option value="" selected disabled>Please select a score</option>
                                        <option title="<?php echo $question['oneMark']; ?>" value="">1</option>
                                        <option title="<?php echo $question['twoMark']; ?>" value="">2</option>
                                        <option title="<?php echo $question['threeMark']; ?>" value="">3</option>
                                        <option title="<?php echo $question['fourMark']; ?>" value="">4</option>
                                        <option title="<?php echo $question['fiveMark']; ?>" value="">5</option>
                                    </select>
                                </div>
                                <div class="card-body">
                                    <p><strong>*Comment on your score:</strong></p>
                                    <div class="form-group shadow-textarea">
                                        <label for="scoreAnswer"></label>
                                        <textarea class="form-control z-depth-1" id="scoreAnswer" rows="3"
                                                  placeholder="Write your answer to the score you have given above here"></textarea>
                                    </div>
                                </div>
                            <?php }
                        }
                }

                ?>
                    </div>
                </div>
                <br/>
                <input type=submit class="btn btn-outline-primary float-right" name="scoreAudit" value="Score">
            </div>
        </form>

<?php require_once('../Views/template/footer.phtml');